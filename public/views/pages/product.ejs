<!DOCTYPE html>
<html lang="en">

<head>

    <%- include('../partials/head'); %>

    <link rel="stylesheet" type="text/css" href="css/login.css">

    <style>
        .container{
            margin-top: 30px;
        }
    
        .img {
            width: 100%;
            height: 100%;

            align-self: center;
            object-fit: contain;
        }
        .admin-btns{
            margin-top: 10px;;
        }
    </style>
</head>

<body>
    <header>
        <%- include('../partials/header', {admin, user}); %>
    </header>
    
    <main class="container">
        <div class="row ">
            <div class="col s12 m4 l4">
                <div class="carousel carousel-slider center ">
                    <% product.pictures.forEach(picture => {%>
                    <div class="carousel-item grey" href="#">
                        <img class="img"
                            src=<%= picture %> />
                    </div>
                    <% }); %>
                </div>

                <div class="">
                    <h6>Издатель</h6>
                    <p><%= product.publisher %></p>
                    <h6>Тип обложки</h6>
                    <p><%= product.coverType %></p>
                    <h6>Цена</h6>
                    <p><%= product.price %> руб.</p>
                    <div>
                        <form hidden id="basket-form" action="/basket/addBasket" method="post">
                            <input hidden  type="text" name="id_product" value=<%= product._id %> />
                        </form>
                        <% if(product.items.length > 0) {%> 
                        <button form="basket-form" class="btn">Добавить в корзину</button>
                        <% } else {%>
                        <button class="btn grey">Нет в наличии</button>
                        <% } %> 
                        <button class="btn pink favourite"><i class="material-icons fav-icon">
                            <% if(!product.isLiked){ %> <%= 'favorite_border' %>
                            <%} else{ %> <%= 'favorite' %><% } %> 
                        </i></button>
                        <form hidden action="/favourite/createDeleteFavourite" method="post">
                            <input hidden  type="text" name="productId" value=<%= product._id %> />
                        </form>
                    </div>
                    <!-- <div class="row"> -->
                    <% if(admin){ %> 
                    <div class="admin-btns">
                        
                        <a href=<%= `/adminEditProduct?productId=${product._id}` %> class="btn darken-2 yellow">Изменить</a>

                        <button form="delete-form" class="btn darken-2 red" id="delete-btn">Удалить</button>
                        <form id="delete-form" hidden action="/favourite/" method="post">
                            <input hidden  type="text" name="productId" value=<%= product._id %> />
                        </form>
                    </div>
                    <% } %> 
                    <!-- </div> -->
                </div>
            </div>

            <div class="col s12 m8 l8">
                <H5>Название</H5>
                <p><%= product.title %></p>
                <h6>Описание</h6>
                <p><%= product.description %></p>
            </div>
        </div>
        <div class="row">
            <h6 class="text-center col s12">Похожие товары</h6>

            <div class="similar">
                
                <% similar.forEach(function(comic){ %>
                    <%- include('../partials/comicsCard', {comic: comic}); %>
                <% }); %>
            </div>
        </div>
    </main>

    <footer>
        <%- include('../partials/footer'); %>
    </footer>

    <script>
        $(document).ready(function () {

            $('.carousel.carousel-slider').carousel({
                fullWidth: true,
                indicators: true
            });

            // setInterval(function() {
            //     $('.carousel.carousel-slider').carousel('next');
            // }, 1500);
        });

    </script>

    <script src="/js/frontLike.js"></script>
</body>

</html>